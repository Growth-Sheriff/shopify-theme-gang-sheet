{% comment %}
  cp Product Grid - Premium E-commerce Display
  Fully Customizable Product Cards with cp Design System
{% endcomment %}

{%- render 'custom-css-renderer', section: section -%}

<section class="cp-product-grid-section" style="background: {{ section.settings.section_bg }}; padding: {{ section.settings.section_padding | default: '2rem 0' }};">
  <div class="container">
    <!-- Section Header -->
    {% if section.settings.show_header %}
    {%- comment -%} Desktop Header - Purple Elegant Style {%- endcomment -%}
    <div class="cp-elegant-header cp-header-purple cp-desktop-header">
      <div class="cp-header-deco left">
        <span class="deco-diamond"></span>
        <span class="deco-line"></span>
        <span class="deco-dot"></span>
      </div>
      <div class="cp-header-container">
        <span class="cp-header-corner tl"></span>
        <span class="cp-header-corner tr"></span>
        <span class="cp-header-corner bl"></span>
        <span class="cp-header-corner br"></span>
        {% if section.settings.badge_text != blank %}
          <span class="cp-header-badge">{{ section.settings.badge_text }}</span>
        {% endif %}
        <h2 class="cp-header-title">{{ section.settings.title | default: 'OUR PRODUCTS' }}</h2>
      </div>
      <div class="cp-header-deco right">
        <span class="deco-dot"></span>
        <span class="deco-line"></span>
        <span class="deco-diamond"></span>
      </div>
    </div>
    
    {%- comment -%} Mobile Glassmorphism Header - Lavender (Zarafet & Zevk) {%- endcomment -%}
    <div class="cp-glass-header-wrap cp-glass-lavender cp-mobile-header">
      <div class="cp-glass-side left">
        <span class="dot"></span>
        <span class="line"></span>
        <span class="end"></span>
      </div>
      <div class="cp-glass-container">
        <span class="cp-glass-corner tl"></span>
        <span class="cp-glass-corner tr"></span>
        <span class="cp-glass-corner bl"></span>
        <span class="cp-glass-corner br"></span>
        <div class="cp-glass-inner">
          {% if section.settings.badge_text != blank %}
          <span class="cp-glass-badge">{{ section.settings.badge_text }}</span>
          {% endif %}
          <h2 class="cp-glass-title">{{ section.settings.title | default: 'PRODUCTS' }}</h2>
        </div>
      </div>
      <div class="cp-glass-side right">
        <span class="end"></span>
        <span class="line"></span>
        <span class="dot"></span>
      </div>
    </div>
    {% endif %}
    
    <!-- Product Grid -->
    <div class="cp-products-grid" style="
      display: grid;
      grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
      gap: {{ section.settings.grid_gap }};
    ">
      {% if section.settings.collection != blank %}
        {% for product in collections[section.settings.collection].products limit: section.settings.products_limit %}
          <div class="cp-product-card" style="background: {{ section.settings.card_bg }}; border-radius: {{ section.settings.card_radius }}; box-shadow: {{ section.settings.card_shadow }};">
            <!-- Product Image -->
            <div class="cp-product-image">
              <a href="{{ product.url }}">
                {% if product.featured_image %}
                  <img src="{{ product.featured_image | image_url: width: 400 }}" 
                       alt="{{ product.title }}" 
                       width="400" 
                       height="400" 
                       loading="{% if forloop.index <= 4 %}eager{% else %}lazy{% endif %}"
                       decoding="async">
                {% else %}
                  <div class="cp-placeholder"><i class="fa-solid fa-image"></i></div>
                {% endif %}
              </a>
              
              <!-- Badges -->
              <div class="cp-product-badges">
                {% if product.available == false %}
                  <span class="cp-badge-sold-out">Sold Out</span>
                {% elsif product.compare_at_price > product.price %}
                  {% assign discount = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price %}
                  <span class="cp-badge-sale">-{{ discount }}%</span>
                {% endif %}
                {% if product.tags contains 'new' %}
                  <span class="cp-badge-new">New</span>
                {% endif %}
                {% if product.tags contains 'bestseller' %}
                  <span class="cp-badge-best">Best Seller</span>
                {% endif %}
              </div>
              
              <!-- Quick Actions -->
              {% if section.settings.show_quick_actions %}
              <div class="cp-quick-actions">
                <button class="cp-action-btn" title="Quick View" onclick="event.preventDefault();">
                  <i class="fa-solid fa-eye"></i>
                </button>
                <button class="cp-action-btn" title="Add to Wishlist" onclick="event.preventDefault();">
                  <i class="fa-regular fa-heart"></i>
                </button>
                <button class="cp-action-btn" title="Compare" onclick="event.preventDefault();">
                  <i class="fa-solid fa-code-compare"></i>
                </button>
              </div>
              {% endif %}
              
              <!-- Hover Button -->
              {% if section.settings.show_hover_button %}
              <a href="{{ product.url }}" class="cp-view-btn">
                <i class="fa-solid fa-arrow-right"></i>
                {{ section.settings.hover_button_text }}
              </a>
              {% endif %}
            </div>
            
            <!-- Product Info -->
            <div class="cp-product-info" style="padding: {{ section.settings.card_padding }};">
              <!-- Category -->
              {% if section.settings.show_category and product.type != blank %}
                <div class="cp-product-category" style="color: {{ section.settings.category_color }};">{{ product.type }}</div>
              {% endif %}
              
              <!-- Title -->
              <h3 class="cp-product-title">
                <a href="{{ product.url }}" style="color: {{ section.settings.title_color }};">{{ product.title }}</a>
              </h3>
              
              <!-- Rating -->
              {% if section.settings.show_rating %}
              <div class="cp-product-rating">
                <div class="cp-stars">
                  {% for i in (1..5) %}
                    <i class="fa-solid fa-star"></i>
                  {% endfor %}
                </div>
                <span class="cp-review-count">({{ product.metafields.reviews.rating_count | default: '0' }})</span>
              </div>
              {% endif %}
              
              <!-- Price -->
              <div class="cp-product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="cp-price-old">{{ product.compare_at_price | money }}</span>
                {% endif %}
                <span class="cp-price-current" style="color: {{ section.settings.price_color }};">{{ product.price | money }}</span>
              </div>
              
              {%- comment -%} Upload Widget Area {%- endcomment -%}
              {% if section.settings.enable_upload_mode %}
                <div class="upload-widget-area">
                  {% render 'dtf-quick-upload-btn', product: product, button_text: 'Upload Design' %}
                </div>
              {% endif %}
              
              {%- comment -%} Add to Cart or Go to Product (Hidden when upload mode is enabled) {%- endcomment -%}
              {% if section.settings.show_add_to_cart %}
              {% unless section.settings.enable_upload_mode %}
              {% if section.settings.button_action == 'go_to_product' %}
                <a href="{{ product.url }}" class="sb-btn">
                  <i class="fa-solid fa-arrow-right"></i>
                  {{ section.settings.view_product_text | default: 'View Product' }}
                </a>
              {% else %}
                <form action="{{ routes.cart_add_url }}" method="post" class="cp-add-form">
                  <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                  <button type="submit" class="sb-btn" {% unless product.available %}disabled{% endunless %}>
                    <i class="fa-solid fa-shopping-cart"></i>
                    {{ section.settings.add_to_cart_text }}
                  </button>
                </form>
              {% endif %}
              {% endunless %}
              {% endif %}
            </div>
          </div>
        {% endfor %}
      {% else %}
        <!-- Manual Blocks with Product Picker Support -->
        {% for block in section.blocks %}
          {% if block.type == 'product_card' %}
            {% assign card_product = block.settings.product %}
            
            {% if card_product != blank %}
              <!-- Shopify Product Selected - Auto Data -->
              <div class="cp-product-card" style="background: {{ section.settings.card_bg }}; border-radius: {{ section.settings.card_radius }}; box-shadow: {{ section.settings.card_shadow }};" {{ block.shopify_attributes }}>
                <div class="cp-product-image">
                  <a href="{{ card_product.url }}">
                    {% if card_product.featured_image %}
                      <img src="{{ card_product.featured_image | image_url: width: 400 }}" alt="{{ card_product.title }}" width="400" height="400" loading="lazy">
                    {% else %}
                      <div class="cp-placeholder"><i class="fa-solid fa-image"></i></div>
                    {% endif %}
                  </a>
                  
                  <div class="cp-product-badges">
                    {% if card_product.available == false %}
                      <span class="cp-badge-sold-out">{{ section.settings.sold_out_text | default: 'Sold Out' }}</span>
                    {% elsif card_product.compare_at_price > card_product.price %}
                      {% assign discount = card_product.compare_at_price | minus: card_product.price | times: 100 | divided_by: card_product.compare_at_price %}
                      <span class="cp-badge-sale">-{{ discount }}%</span>
                    {% endif %}
                    {% if card_product.tags contains 'new' %}
                      <span class="cp-badge-new">{{ section.settings.new_badge_text | default: 'New' }}</span>
                    {% endif %}
                    {% if card_product.tags contains 'bestseller' %}
                      <span class="cp-badge-best">{{ section.settings.bestseller_text | default: 'Best Seller' }}</span>
                    {% endif %}
                  </div>
                  
                  {% if section.settings.show_quick_actions %}
                  <div class="cp-quick-actions">
                    <button class="cp-action-btn" title="{{ section.settings.quick_view_text | default: 'Quick View' }}"><i class="fa-solid fa-eye"></i></button>
                    <button class="cp-action-btn" title="{{ section.settings.wishlist_text | default: 'Wishlist' }}"><i class="fa-regular fa-heart"></i></button>
                  </div>
                  {% endif %}
                  
                  {% if section.settings.show_hover_button %}
                  <a href="{{ card_product.url }}" class="cp-view-btn">
                    <i class="fa-solid fa-arrow-right"></i>
                    {{ section.settings.hover_button_text }}
                  </a>
                  {% endif %}
                </div>
                
                <div class="cp-product-info" style="padding: {{ section.settings.card_padding }};">
                  {% if section.settings.show_category and card_product.type != blank %}
                    <div class="cp-product-category" style="color: {{ section.settings.category_color }};">{{ card_product.type }}</div>
                  {% endif %}
                  
                  <h3 class="cp-product-title">
                    <a href="{{ card_product.url }}" style="color: {{ section.settings.title_color }};">{{ card_product.title }}</a>
                  </h3>
                  
                  {% if section.settings.show_rating %}
                  <div class="cp-product-rating">
                    <div class="cp-stars">
                      {% for i in (1..5) %}
                        <i class="fa-solid fa-star"></i>
                      {% endfor %}
                    </div>
                    <span class="cp-review-count">({{ card_product.metafields.reviews.rating_count | default: block.settings.review_count | default: '0' }})</span>
                  </div>
                  {% endif %}
                  
                  <div class="cp-product-price">
                    {% if card_product.compare_at_price > card_product.price %}
                      <span class="cp-price-old">{{ card_product.compare_at_price | money }}</span>
                    {% endif %}
                    <span class="cp-price-current" style="color: {{ section.settings.price_color }};">{{ card_product.price | money }}</span>
                  </div>
                  
                  {%- comment -%} Upload Widget Area (Block Level) {%- endcomment -%}
                  {% if block.settings.enable_upload_mode %}
                    <div class="upload-widget-area">
                      {% render 'dtf-quick-upload-btn', product: card_product, button_text: 'Upload Design' %}
                    </div>
                  {% endif %}
                  
                  {%- comment -%} Add to Cart or Go to Product (Hidden when upload mode is enabled) {%- endcomment -%}
                  {% if section.settings.show_add_to_cart %}
                  {% unless block.settings.enable_upload_mode %}
                  {%- assign grid_btn_action = block.settings.button_action | default: 'default' -%}
                  {%- if grid_btn_action == 'default' -%}
                    {%- assign grid_btn_action = section.settings.button_action | default: 'add_to_cart' -%}
                  {%- endif -%}
                  
                  {% if grid_btn_action == 'go_to_product' %}
                    <a href="{{ card_product.url }}" class="sb-btn">
                      <i class="fa-solid fa-arrow-right"></i>
                      {{ section.settings.view_product_text | default: 'View Product' }}
                    </a>
                  {% else %}
                    <form action="{{ routes.cart_add_url }}" method="post" class="cp-add-form">
                      <input type="hidden" name="id" value="{{ card_product.selected_or_first_available_variant.id }}">
                      <button type="submit" class="sb-btn" {% unless card_product.available %}disabled{% endunless %}>
                        <i class="fa-solid fa-shopping-cart"></i>
                        {{ section.settings.add_to_cart_text }}
                      </button>
                    </form>
                  {% endif %}
                  {% endunless %}
                  {% endif %}
                </div>
              </div>
            {% else %}
              <!-- Manual Entry Fallback -->
              <div class="cp-product-card" style="background: {{ section.settings.card_bg }}; border-radius: {{ section.settings.card_radius }}; box-shadow: {{ section.settings.card_shadow }};" {{ block.shopify_attributes }}>
                <div class="cp-product-image">
                  <a href="{{ block.settings.link | default: '#' }}">
                    {% if block.settings.image %}
                      <img src="{{ block.settings.image | image_url: width: 400 }}" alt="{{ block.settings.title }}" width="400" height="400" loading="lazy">
                    {% elsif block.settings.image_url != blank %}
                      <img src="{{ block.settings.image_url }}" alt="{{ block.settings.title }}" width="400" height="400" loading="lazy">
                    {% else %}
                      <div class="cp-placeholder"><i class="fa-solid fa-image"></i></div>
                    {% endif %}
                  </a>
                  
                  {% if block.settings.badge != blank %}
                    <div class="cp-product-badges">
                      <span class="cp-badge-{{ block.settings.badge_type }}">{{ block.settings.badge }}</span>
                    </div>
                  {% endif %}
                  
                  {% if section.settings.show_quick_actions %}
                  <div class="cp-quick-actions">
                    <button class="cp-action-btn" title="Quick View"><i class="fa-solid fa-eye"></i></button>
                    <button class="cp-action-btn" title="Wishlist"><i class="fa-regular fa-heart"></i></button>
                  </div>
                  {% endif %}
                  
                  {% if section.settings.show_hover_button %}
                  <a href="{{ block.settings.link | default: '#' }}" class="cp-view-btn">
                    <i class="fa-solid fa-arrow-right"></i>
                    {{ section.settings.hover_button_text }}
                  </a>
                  {% endif %}
                </div>
                
                <div class="cp-product-info" style="padding: {{ section.settings.card_padding }};">
                  {% if block.settings.category != blank %}
                    <div class="cp-product-category" style="color: {{ section.settings.category_color }};">{{ block.settings.category }}</div>
                  {% endif %}
                  
                  <h3 class="cp-product-title">
                    <a href="{{ block.settings.link | default: '#' }}" style="color: {{ section.settings.title_color }};">{{ block.settings.title | default: 'Select a product' }}</a>
                  </h3>
                  
                  {% if section.settings.show_rating %}
                  <div class="cp-product-rating">
                    <div class="cp-stars">
                      {% assign rating = block.settings.rating | default: 5 %}
                      {% for i in (1..5) %}
                        {% if i <= rating %}
                          <i class="fa-solid fa-star"></i>
                        {% else %}
                          <i class="fa-regular fa-star"></i>
                        {% endif %}
                      {% endfor %}
                    </div>
                    <span class="cp-review-count">({{ block.settings.review_count | default: 0 }})</span>
                  </div>
                  {% endif %}
                  
                  <div class="cp-product-price">
                    {% if block.settings.compare_price != blank %}
                      <span class="cp-price-old">{{ block.settings.compare_price }}</span>
                    {% endif %}
                    <span class="cp-price-current" style="color: {{ section.settings.price_color }};">{{ block.settings.price | default: '$0.00' }}</span>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
    
    <!-- View All Button -->
    {% if section.settings.show_view_all and section.settings.view_all_link != blank %}
    <div class="cp-view-all-wrapper" style="text-align: center; margin-top: 2rem;">
      <a href="{{ section.settings.view_all_link }}" class="cp-view-all-btn" style="background: {{ section.settings.view_all_bg }}; color: {{ section.settings.view_all_color }};">
        {{ section.settings.view_all_text }}
        <i class="fa-solid fa-arrow-right"></i>
      </a>
    </div>
    {% endif %}
  </div>
</section>

<style>
  .cp-product-grid-section .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .cp-section-header {
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 1.5rem;
    text-align: left;
    padding-left: 1rem;
    border-left: 3px solid #7c6cf0;
  }
  
  .cp-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 0;
    border-radius: 0;
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    margin-bottom: 0.25rem;
    background: transparent !important;
    color: #7c6cf0 !important;
  }
  
  .cp-section-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 0.35rem;
    font-family: 'Montserrat', sans-serif;
    color: #2d2d2d !important;
    letter-spacing: 0.01em;
  }
  
  .cp-section-subtitle {
    font-size: 0.85rem;
    margin: 0;
    max-width: 500px;
    color: #777 !important;
  }
  
  .cp-product-card {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .cp-product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(115, 103, 240, 0.15) !important;
  }
  
  .cp-product-image {
    position: relative;
    overflow: hidden;
    aspect-ratio: 1;
    background: #f8f7fa;
  }
  
  .cp-product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .cp-product-card:hover .cp-product-image img {
    transform: scale(1.08);
  }
  
  .cp-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: #ddd;
  }
  
  .cp-product-badges {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .cp-badge-sale {
    background: linear-gradient(135deg, #ea5455, #e42728);
    color: #fff;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  
  .cp-badge-new {
    background: linear-gradient(135deg, #7367F0, #5e50ee);
    color: #fff;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  
  .cp-badge-best {
    background: linear-gradient(135deg, #28c76f, #1f9d57);
    color: #fff;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  
  .cp-badge-sold-out {
    background: #6e6b7b;
    color: #fff;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  
  .cp-quick-actions {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    opacity: 0;
    transform: translateX(10px);
    transition: all 0.3s ease;
  }
  
  .cp-product-card:hover .cp-quick-actions {
    opacity: 1;
    transform: translateX(0);
  }
  
  .cp-action-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #fff;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: all 0.2s ease;
  }
  
  .cp-action-btn:hover {
    background: #7367F0;
    color: #fff;
  }
  
  .cp-view-btn {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.875rem;
    background: linear-gradient(135deg, #7367F0, #5e50ee);
    color: #fff;
    text-decoration: none;
    text-align: center;
    font-weight: 500;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }
  
  .cp-product-card:hover .cp-view-btn {
    transform: translateY(0);
  }
  
  .cp-product-info {
    border-top: 1px solid #ebe9f1;
  }
  
  .cp-product-category {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
    font-weight: 500;
  }
  
  .cp-product-title {
    font-size: 1rem;
    font-weight: 500;
    margin: 0 0 0.5rem;
    line-height: 1.4;
  }
  
  .cp-product-title a {
    text-decoration: none;
    transition: color 0.2s;
  }
  
  .cp-product-title a:hover {
    color: #7367F0 !important;
  }
  
  .cp-product-rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }
  
  .cp-stars {
    display: flex;
    gap: 2px;
  }
  
  .cp-stars i {
    color: #FFB400;
    font-size: 0.75rem;
  }
  
  .cp-review-count {
    font-size: 0.75rem;
    color: #6e6b7b;
  }
  
  .cp-product-price {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }
  
  .cp-price-old {
    text-decoration: line-through;
    color: #b9b9c3;
    font-size: 0.875rem;
  }
  
  .cp-price-current {
    font-size: 1.125rem;
    font-weight: 600;
  }
  
  .cp-add-btn {
    width: 100%;
    padding: 0.75rem 1rem;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .cp-add-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(115, 103, 240, 0.4);
  }
  
  .cp-add-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  .cp-view-all-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 2rem;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .cp-view-all-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(115, 103, 240, 0.3);
  }
  
  @media (max-width: 1024px) {
    .cp-products-grid {
      grid-template-columns: repeat(3, 1fr) !important;
    }
  }
  
  @media (max-width: 768px) {
    .cp-products-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 0.75rem !important;
    }
    
    .cp-section-title {
      font-size: 1.5rem;
    }
    
    /* Quick actions always visible on mobile touch */
    .cp-quick-actions {
      opacity: 1;
      transform: translateX(0);
      top: 0.5rem;
      right: 0.5rem;
    }
    
    .cp-action-btn {
      width: 32px;
      height: 32px;
      font-size: 0.75rem;
    }
    
    .cp-product-info {
      padding: 0.75rem !important;
    }
    
    .cp-product-title {
      font-size: 0.875rem;
    }
    
    .cp-price-current {
      font-size: 1rem;
    }
    
    .cp-add-btn {
      padding: 0.625rem 0.75rem;
      font-size: 0.8rem;
    }
  }
  
  @media (max-width: 480px) {
    .cp-products-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 0.5rem !important;
    }
    
    .cp-product-info {
      padding: 0.5rem !important;
    }
    
    .cp-product-title {
      font-size: 0.8rem;
      margin-bottom: 0.375rem;
    }
    
    .cp-product-rating {
      margin-bottom: 0.375rem;
    }
    
    .cp-stars i {
      font-size: 0.625rem;
    }
    
    .cp-review-count {
      font-size: 0.625rem;
    }
    
    .cp-price-current {
      font-size: 0.9rem;
    }
    
    .cp-add-btn {
      padding: 0.5rem;
      font-size: 0.75rem;
    }
  }
</style>

{% schema %}
{
  "name": "cp Product Grid",
  "tag": "section",
  "class": "cp-products-section",
  "settings": [
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "color_background",
      "id": "section_bg",
      "label": "Section Background",
      "default": "#f8f7fa"
    },
    {
      "type": "text",
      "id": "section_padding",
      "label": "Section Padding",
      "default": "4rem 0"
    },
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "checkbox",
      "id": "show_header",
      "label": "Show Header",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "Our Products"
    },
    {
      "type": "header",
      "content": "Product Source"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection (auto-populate)"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Products Limit",
      "min": 2,
      "max": 12,
      "default": 4
    },
    {
      "type": "header",
      "content": "Grid Layout"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns (Desktop)",
      "min": 2,
      "max": 6,
      "default": 4
    },
    {
      "type": "text",
      "id": "grid_gap",
      "label": "Grid Gap",
      "default": "1.5rem"
    },
    {
      "type": "header",
      "content": "Card Styling"
    },
    {
      "type": "color",
      "id": "card_bg",
      "label": "Card Background",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "card_radius",
      "label": "Card Border Radius",
      "default": "12px"
    },
    {
      "type": "text",
      "id": "card_shadow",
      "label": "Card Shadow",
      "default": "0 4px 24px rgba(34, 41, 47, 0.1)"
    },
    {
      "type": "text",
      "id": "card_padding",
      "label": "Card Content Padding",
      "default": "1rem"
    },
    {
      "type": "header",
      "content": "Card Features"
    },
    {
      "type": "checkbox",
      "id": "show_category",
      "label": "Show Category",
      "default": true
    },
    {
      "type": "color",
      "id": "category_color",
      "label": "Category Color",
      "default": "#7367F0"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show Rating",
      "default": true
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price Color",
      "default": "#7367F0"
    },
    {
      "type": "checkbox",
      "id": "show_quick_actions",
      "label": "Show Quick Actions",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_hover_button",
      "label": "Show Hover Button",
      "default": true
    },
    {
      "type": "text",
      "id": "hover_button_text",
      "label": "Hover Button Text",
      "default": "View Product"
    },
    {
      "type": "checkbox",
      "id": "show_add_to_cart",
      "label": "Show Add to Cart",
      "default": true
    },
    {
      "type": "text",
      "id": "add_to_cart_text",
      "label": "Add to Cart Text",
      "default": "Add to Cart"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button Background",
      "default": "#7367F0"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Badge Labels"
    },
    {
      "type": "text",
      "id": "sold_out_text",
      "label": "Sold Out Text",
      "default": "Sold Out"
    },
    {
      "type": "text",
      "id": "new_badge_text",
      "label": "New Badge Text",
      "default": "New"
    },
    {
      "type": "text",
      "id": "bestseller_text",
      "label": "Bestseller Text",
      "default": "Best Seller"
    },
    {
      "type": "text",
      "id": "quick_view_text",
      "label": "Quick View Tooltip",
      "default": "Quick View"
    },
    {
      "type": "text",
      "id": "wishlist_text",
      "label": "Wishlist Tooltip",
      "default": "Add to Wishlist"
    },
    {
      "type": "header",
      "content": "View All Button"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show View All Button",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All Text",
      "default": "View All Products"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All Link"
    },
    {
      "type": "color",
      "id": "view_all_bg",
      "label": "View All Button BG",
      "default": "#7367F0"
    },
    {
      "type": "color",
      "id": "view_all_color",
      "label": "View All Button Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "paragraph",
      "content": "⚠️ These settings only work when 'Enable Upload Mode' is OFF"
    },
    {
      "type": "select",
      "id": "button_action",
      "label": "Button Action",
      "options": [
        { "value": "add_to_cart", "label": "Add to Cart" },
        { "value": "go_to_product", "label": "Go to Product Page" }
      ],
      "default": "add_to_cart"
    },
    {
      "type": "header",
      "content": "Upload Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_upload_mode",
      "label": "Enable Upload Mode",
      "default": false,
      "info": "When enabled, shows Upload button and hides Add to Cart for auto-loaded collection products"
    },
    {
      "type": "header",
      "content": "⚙️ Gelişmiş"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Özel CSS",
      "info": "Bu section için özel CSS kodları ekleyin"
    }
  ],
  "blocks": [
    {
      "type": "product_card",
      "name": "Product Card",
      "settings": [
        {
          "type": "header",
          "content": "Product Selection"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "paragraph",
          "content": "Select a product above for automatic data, OR use manual fields below."
        },
        {
          "type": "header",
          "content": "Manual Override (Optional)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Product Image"
        },
        {
          "type": "url",
          "id": "image_url",
          "label": "Image URL (fallback)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Product Title",
          "default": "Premium DTF Transfer"
        },
        {
          "type": "text",
          "id": "category",
          "label": "Category",
          "default": "DTF Transfer"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Product Link"
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price",
          "default": "$4.99"
        },
        {
          "type": "text",
          "id": "compare_price",
          "label": "Compare at Price"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 0,
          "max": 5,
          "default": 5
        },
        {
          "type": "number",
          "id": "review_count",
          "label": "Review Count",
          "default": 128
        },
        {
          "type": "text",
          "id": "badge",
          "label": "Badge Text"
        },
        {
          "type": "select",
          "id": "badge_type",
          "label": "Badge Type",
          "options": [
            { "value": "sale", "label": "Sale (Red)" },
            { "value": "new", "label": "New (Purple)" },
            { "value": "best", "label": "Best Seller (Green)" }
          ],
          "default": "new"
        },
        {
          "type": "header",
          "content": "Button Settings"
        },
        {
          "type": "select",
          "id": "button_action",
          "label": "Button Action",
          "options": [
            { "value": "default", "label": "Use Global Setting" },
            { "value": "add_to_cart", "label": "Add to Cart" },
            { "value": "go_to_product", "label": "Go to Product Page" }
          ],
          "default": "default"
        },
        {
          "type": "header",
          "content": "Upload Settings"
        },
        {
          "type": "checkbox",
          "id": "enable_upload_mode",
          "label": "Enable Upload Mode",
          "default": false,
          "info": "When enabled, shows Upload button and hides Add to Cart"
        },
        {
          "type": "textarea",
          "id": "custom_css",
          "label": "Özel CSS (Block)",
          "info": "Bu block için özel CSS"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "cp Product Grid",
      "blocks": [
        { "type": "product_card", "settings": { "title": "Standard DTF Transfers", "category": "DTF Transfer", "price": "$4.99", "compare_price": "$9.99", "rating": 5, "review_count": 18624, "badge": "Best Seller", "badge_type": "best", "image_url": "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop" } },
        { "type": "product_card", "settings": { "title": "UV DTF Stickers", "category": "UV DTF", "price": "$2.99", "compare_price": "$5.99", "rating": 5, "review_count": 2845, "image_url": "https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400&h=400&fit=crop" } },
        { "type": "product_card", "settings": { "title": "Rhinestone Transfers", "category": "Rhinestone", "price": "$8.99", "compare_price": "$12.99", "rating": 5, "review_count": 1290, "badge": "New", "badge_type": "new", "image_url": "https://images.unsplash.com/photo-1558171813-4c088753af8f?w=400&h=400&fit=crop" } },
        { "type": "product_card", "settings": { "title": "Screen Print Transfers", "category": "Screen Print", "price": "$3.49", "compare_price": "$6.99", "rating": 5, "review_count": 3421, "image_url": "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400&h=400&fit=crop" } }
      ]
    }
  ]
}
{% endschema %}


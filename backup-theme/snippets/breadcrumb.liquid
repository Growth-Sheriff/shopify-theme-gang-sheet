{% comment %}
  ============================================
  BREADCRUMB SNIPPET
  Include at top of pages/products/collections
  Usage: {% render 'breadcrumb' %}
  ============================================
{% endcomment %}

<style>
/* ===== BREADCRUMB STYLES ===== */
.breadcrumb-wrapper {
  padding: 16px 0;
  background: #f8f9fc;
  border-bottom: 1px solid rgba(0,0,0,0.04);
}

.breadcrumb {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.85rem;
}

.breadcrumb-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #6c757d;
}

.breadcrumb-item a {
  color: #5d596c;
  text-decoration: none;
  transition: all 0.3s ease;
}

.breadcrumb-item a:hover {
  color: #7367f0;
}

.breadcrumb-item.active {
  color: #2d2d3a;
  font-weight: 500;
}

.breadcrumb-separator {
  color: #9a97a8;
  font-size: 0.7rem;
}

.breadcrumb-icon {
  font-size: 0.8rem;
  color: #7367f0;
}

/* Alternative Styles */
.breadcrumb-wrapper.minimal {
  background: transparent;
  border: none;
  padding: 12px 0;
}

.breadcrumb-wrapper.boxed .breadcrumb {
  background: #fff;
  padding: 12px 20px;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.04);
}

.breadcrumb-wrapper.pills .breadcrumb-item a,
.breadcrumb-wrapper.pills .breadcrumb-item.active {
  background: rgba(115, 103, 240, 0.08);
  padding: 6px 12px;
  border-radius: 20px;
}

.breadcrumb-wrapper.pills .breadcrumb-item.active {
  background: #7367f0;
  color: #fff;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 767.98px) {
  .breadcrumb-wrapper {
    padding: 12px 0;
  }
  
  .breadcrumb {
    font-size: 0.8rem;
  }
  
  .breadcrumb-item:not(:last-child):not(:first-child) {
    display: none;
  }
}
</style>

<div class="breadcrumb-wrapper {{ style | default: '' }}">
  <div class="container">
    <nav aria-label="Breadcrumb">
      <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        
        <!-- Home -->
        <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item">
            <i class="fa-solid fa-home breadcrumb-icon"></i>
            <span itemprop="name">Home</span>
          </a>
          <meta itemprop="position" content="1" />
        </li>
        
        {%- assign position = 2 -%}
        
        {%- if template.name == 'product' -%}
          <!-- Product: Collection > Product -->
          {%- if product.collections.size > 0 -%}
            {%- assign main_collection = product.collections | first -%}
            <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
            <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
              <a href="{{ main_collection.url }}" itemprop="item">
                <span itemprop="name">{{ main_collection.title }}</span>
              </a>
              <meta itemprop="position" content="{{ position }}" />
            </li>
            {%- assign position = position | plus: 1 -%}
          {%- endif -%}
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">{{ product.title }}</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'collection' -%}
          <!-- Collection -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="/collections" itemprop="item">
              <span itemprop="name">Collections</span>
            </a>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          {%- assign position = position | plus: 1 -%}
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">{{ collection.title }}</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'blog' -%}
          <!-- Blog -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">{{ blog.title }}</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'article' -%}
          <!-- Article: Blog > Article -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ blog.url }}" itemprop="item">
              <span itemprop="name">{{ blog.title }}</span>
            </a>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          {%- assign position = position | plus: 1 -%}
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">{{ article.title }}</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'page' -%}
          <!-- Page -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'cart' -%}
          <!-- Cart -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">Shopping Cart</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'search' -%}
          <!-- Search -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">Search Results</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template.name == 'list-collections' -%}
          <!-- Collections List -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span itemprop="name">All Collections</span>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          
        {%- elsif template contains 'customers' -%}
          <!-- Account Pages -->
          <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
          <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="/account" itemprop="item">
              <span itemprop="name">Account</span>
            </a>
            <meta itemprop="position" content="{{ position }}" />
          </li>
          {%- assign position = position | plus: 1 -%}
          
          {%- if template contains 'addresses' -%}
            <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
            <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
              <span itemprop="name">Addresses</span>
              <meta itemprop="position" content="{{ position }}" />
            </li>
          {%- elsif template contains 'order' -%}
            <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>
            <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
              <span itemprop="name">Order Details</span>
              <meta itemprop="position" content="{{ position }}" />
            </li>
          {%- endif -%}
          
        {%- endif -%}
        
      </ol>
    </nav>
  </div>
</div>
